<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="pricing.css" type="text/css">
    <link rel="stylesheet" href="main.css" type="text/css" />
    <link rel="icon" href="img/csbjjlogo.webp" type="image/x-icon" />
    <link rel="stylesheet" href="header-navbar.css" type="text/css"/>
     <meta name="author" content="Michael Swanson" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta
      name="description"
      content="This is the pricing page for csbjj"
    />
    <title>Prices | Colorado Springs BJJ</title>
  </head>
  <body>
    <div id="header-navbar"></div>
    <section class="pricing-section">
      <h2>Most Affordable Prices in Town!</h2>
       <div class="section-header">
            <p class="section-subtitle">Join our community of warriors and transform your life through martial arts. Choose the program that fits your goals and start your journey today.</p>
        </div>

        <!-- Table of Contents -->
        <div class="offerings-toc">
            <h3 class="toc-title"> What We Offer</h3>
            <div class="toc-grid">
                <div class="toc-item">
                    <div class="toc-icon">ü•ã</div>
                    <div class="toc-label">Kids BJJ<br>(Ages 4-12)</div>
                </div>
                <div class="toc-item">
                    <div class="toc-icon">ü•ã</div>
                    <div class="toc-label">Adult BJJ<br>(All Levels)</div>
                </div>
                <div class="toc-item">
                    <div class="toc-icon">üëä</div>
                    <div class="toc-label">Kickboxing<br>(High Energy)</div>
                </div>
                <div class="toc-item">
                    <div class="toc-icon">üí™</div>
                    <div class="toc-label">Women's BJJ<br>(Empowering)</div>
                </div>
                <div class="toc-item">
                    <div class="toc-icon">üéñÔ∏è</div>
                    <div class="toc-label">Military & First Responders</div>
                </div>
                <div class="toc-item">
                    <div class="toc-icon">üíë</div>
                    <div class="toc-label">Couples<br>(Train Together)</div>
                </div>
            </div>
        </div>
      <div id="pricing-section"></div>
      
    </section>
    <div id="footer"></div>

   <!-- Include the carousel JavaScript class -->
    <script src="pricing.js" defer></script> 
    <!-- Include the navbar JavaScript -->
    <script src="navbar.js"></script>
<script>
  let pricingCarousel = null;
  window.pricingCarousel = null;

  async function initializePage() {
    try {
      // Load header
      await HTMLLoader.loadComponent("header-navbar", "header-navbar.html");
      initializeNavbar();

      // Load pricing HTML
      await HTMLLoader.loadComponent("pricing-section", "pricing-section.html");

      // Check size and set up carousel or stacked view
      handleCarousel();

      // Re-check on resize
      window.addEventListener("resize", handleCarousel);

      // Load footer
      await HTMLLoader.loadComponent("footer", "footer.html");
    } catch (error) {
      console.error("Error initializing page:", error);
    }
  }

  async function handleCarousel() {
    const isDesktop = window.innerWidth > 1100;

    if (isDesktop && !pricingCarousel) {
      // Initialize carousel
      pricingCarousel = new PricingCarousel("pricingCarousel", {
        cardsPerView: 3,
        enableTouch: true,
        enableDots: true,
        enableArrows: true,
        autoSlide: false,
      });
      window.pricingCarousel = pricingCarousel;
      console.log("Carousel enabled for desktop");
    } else if (!isDesktop && pricingCarousel) {
      // Destroy carousel
      pricingCarousel.destroy();
      pricingCarousel = null;
      window.pricingCarousel = null;

      // Reload the entire pricing section HTML to get fresh cards
      console.log("Reloading pricing cards for mobile view");
      await HTMLLoader.loadComponent("pricing-section", "pricing-section.html");
      
      console.log("Carousel disabled for mobile, showing all cards");
    }
  }

  document.addEventListener("DOMContentLoaded", initializePage);
</script>
<script>
// TOC Navigation
document.addEventListener("DOMContentLoaded", function() {
  setTimeout(function() {
    const cardMapping = {
      'Kids BJJ': 0,
      'Adult BJJ': 1,
      'Kickboxing': 2,
      'Women\'s BJJ': 3,
      'Military & First Responders': 4,
      'Couples': 5
    };

    const tocItems = document.querySelectorAll('.toc-item');
    
    tocItems.forEach(function(item) {
      item.addEventListener('click', function() {
        const labelElement = item.querySelector('.toc-label');
        if (!labelElement) return;
        
        const fullText = labelElement.textContent.trim();
        const label = fullText.replace(/\([^)]*\)/g, '').split('\n')[0].trim();
        const cardIndex = cardMapping[label];
        
        if (cardIndex !== undefined) {
          const isDesktop = window.innerWidth > 1100;
          
          if (isDesktop && window.pricingCarousel) {
            // Center the card in carousel
            const centerOffset = 1; // Middle position of 3 cards
            const targetSlide = (cardIndex - centerOffset + 6) % 6;
            window.pricingCarousel.goToSlide(targetSlide);
          } else {
            // Scroll to card on mobile
            const cards = document.querySelectorAll('.pricing-card');
            if (cards[cardIndex]) {
              cards[cardIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
          }
        }
      });
    });
  }, 500);
});
</script>

  </body>
</html>
