<!DOCTYPE html>
<html lang="en">
  <script>
    fetch("head.html")
      .then((res) => res.text())
      .then((html) => {
        document.head.insertAdjacentHTML("beforeend", html);
      });
  </script>
  <body>
    <div id="header-navbar"></div>
    <section class="pricing-section">
      <h2>Most Affordable Prices in Town!</h2>
      <div id="pricing-section"></div>
    </section>
    <div id="footer"></div>

   <!-- Include the carousel JavaScript class -->
    <script src="pricing.js"></script>
    <!-- Include the navbar JavaScript -->
    <script src="navbar.js"></script>
    <script>
          async function initializePage() {
        try {
          // Load header first and wait for it to complete
          await HTMLLoader.loadComponent(
            "header-navbar",
            "header-navbar.html"
          );

          // Initialize navbar functionality after it's loaded
          console.log('Initializing navbar...');
          initializeNavbar();

          // Load pricing HTML
          await HTMLLoader.loadComponent(
            "pricing-section",
            "pricing-section.html"
          );

          // Now that pricing HTML is loaded, initialize the carousel
          setTimeout(() => {
            const pricingCarousel = new PricingCarousel("pricingCarousel", {
              cardsPerView: 3,
              enableTouch: true,
              enableDots: true,
              enableArrows: true,
              autoSlide: false,
            });

            window.pricingCarousel = pricingCarousel;
            console.log("Pricing carousel initialized successfully");
          }, 100);

          // Load footer
          await HTMLLoader.loadComponent(
            "footer",
            "footer.html"
          );
        } catch (error) {
          console.error("Error initializing page:", error);
        }
      }

      // Initialize everything when DOM is ready
      document.addEventListener("DOMContentLoaded", initializePage);
    </script>
  </body>
</html>
